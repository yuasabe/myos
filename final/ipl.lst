     1                                  ; hello-os
     2                                  ; TAB=4
     3                                  
     4                                  ORG	0x7c00
     5                                  
     6                                  ; FAT12 FD
     7                                  
     8 00000000 EB4E                    JMP	entry
     9                                  
    10 00000002 90                      DB	0x90
    11 00000003 48454C4C4F49504C        DB	"HELLOIPL"
    12 0000000B 0002                    DW	512
    13 0000000D 01                      DB	1
    14 0000000E 0100                    DW	1
    15 00000010 02                      DB	2
    16 00000011 E000                    DW	224
    17 00000013 400B                    DW	2880
    18 00000015 F0                      DB	0xf0
    19 00000016 0900                    DW	9
    20 00000018 1200                    DW	18
    21 0000001A 0200                    DW	2
    22 0000001C 00000000                DD	0
    23 00000020 400B0000                DD	2880
    24 00000024 000029                  DB	0, 0, 0x29
    25 00000027 FFFFFFFF                DD	0xffffffff
    26 0000002B 48454C4C4F2D4F5320-     DB	"HELLO-OS   "
    26 00000034 2020               
    27 00000036 4641543132202020        DB	"FAT12   "
    28                                  ;RESB 18
    29 0000003E 00<rept>                TIMES 18 DB 0
    30                                  
    31                                  ; Program
    32                                  
    33                                  entry:
    34 00000050 B80000                  	MOV		AX, 0
    35 00000053 8ED0                    	MOV		SS, AX
    36 00000055 BC007C                  	MOV		SP, 0x7c00
    37 00000058 8ED8                    	MOV		DS, AX		; data segment
    38 0000005A 8EC0                    	MOV		ES, AX		; extra segment
    39                                  
    40 0000005C BE[7400]                	MOV		SI, msg
    41                                  
    42                                  putloop:
    43 0000005F 8A04                    	MOV		AL, [SI]
    44 00000061 83C601                  	ADD		SI, 1
    45 00000064 3C00                    	CMP		AL, 0
    46 00000066 7409                    	JE		fin
    47 00000068 B40E                    	MOV		AH, 0x0e	; 1文字表示
    48 0000006A BB0F00                  	MOV		BX, 15		; カラーコード
    49 0000006D CD10                    	INT		0x10 		; ビデオBIOS呼び出し
    50 0000006F EBEE                    	JMP putloop
    51                                  
    52                                  fin:
    53 00000071 F4                      	HLT
    54 00000072 EBFD                    	JMP fin
    55                                  
    56                                  msg:
    57 00000074 0A0A                    	DB		0x0a, 0x0a ; 改行2行
    58 00000076 68656C6C6F2C20776F-     	DB		"hello, world"
    58 0000007F 726C64             
    59 00000082 0A                      	DB		0x0a
    60 00000083 00                      	DB		0
    61                                  	; RESB 	0x1fe-$
    62 00000084 00<rept>                	TIMES	0x1fe-($-$$) DB 0
    63 000001FE 55AA                    	DB		0x55, 0xaa
    64                                  	; PCはまずディスクの最初のセクタを読み、その最後の2バイトを見る。それが55AAであればboot sectorと認識する。
